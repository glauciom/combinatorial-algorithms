package gm2;

import java.math.BigDecimal;
import org.apfloat.Apcomplex;
import org.apfloat.ApcomplexMath;
import org.apfloat.Apfloat;

public class BigOperators {

	/**
	 * Estimador de precisão numerica.
	 * @param number numero (grande) de entrada.
	 * @return valor atribuído à precisão do resultado.
	 */
	private static int precision(String number) {
		return number.length() + (int) Math.ceil(Math.log(number.length()));
	}
	
	/**
	 * Calcula o logartimo de um numero grande, com precisão exata.
	 * @param number Numero Grande.
	 * @return
	 */
	public static String log(String number) {
		return ApcomplexMath.log(new Apcomplex(new Apfloat(number,precision(number)))).toString(true);
	}
	
	/**
	 * Calcula o exponencial da imagem. e^number.
	 * @param number exponente.
	 * @return inteiro grande que representa o resultado da potenciação.
	 */
	public static String exp(String number) {
		BigDecimal big = new BigDecimal(ApcomplexMath.exp(new Apcomplex(new Apfloat(number,precision(number)))).toString(true));
		BigDecimal two = new BigDecimal(big.toBigInteger()).subtract(big);
		if(two.equals(BigDecimal.ZERO)) {
			return big.toString();
		} else if(two.compareTo(BigDecimal.ZERO) < 0) {
			return big.add(BigDecimal.ONE).toBigInteger().toString(); 
		}
		return big.toBigInteger().toString();
		
	}
	
	/**
	 * Verifica o erro associado.
	 * @param first Primeiro numero
	 * @param second Segundo numero.
	 * @return Erro associado ao calculo.
	 */
	public static String error(String first, String second) {
		return new Apcomplex(first).subtract(new Apcomplex(second)).toString();
	}
	
	
	/**
	 * Metodo main (para testes).
	 * @param args argumentos (não utilizados).
	 */
	public static void main(String[] args) {
		long time = System.currentTimeMillis();
	//	String k = "10000784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385007845874309875899508750938457093485703948570938500784587430987589950875093845709348570394857093850078458743098758995087509384570934857039485709385709384570938475093857903845790835793857093857903857309485734098570934857390485739058730945873908573908475390458743958743985739587390587398573958709879879807987908709878450375097509857098235790857092875092875098275092875029875092875092875098275098570928750928579028579208572985798579028759827590285792857982759802759827509900058709345709857098570395870958730495873905873059873490587450987345908735908735495589085948509485098598509580958784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809900784587430987589980990078458743098758998099007845874309875899809904573409573958734905873985700";
	// 
		
	//	String k = "9297893274987429847984297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984729789327498742984798472978932749874298479847297893274987429847984778";
		String k = "92893838782378937493";
		System.out.println("length = "+k.length());
		String s = BigOperators.log(k);
		System.out.println("log = "+s.length());
		String s1 = BigOperators.exp(s);
		String err = BigOperators.error(k,s1);
		System.out.println("first = "+s);
		System.out.println("second = "+s1);
		System.out.println("error = "+err);
		time = System.currentTimeMillis() - time;
		
		System.out.println(time);
		
	}
	
}
